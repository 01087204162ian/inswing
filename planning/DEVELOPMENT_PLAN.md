# 🚀 INSWING 개발 계획서

> **목표**: 골프 스윙 분석 서비스를 완성도 높은 제품으로 발전시키기
> **기간**: 2025년 1월 ~ (단계별 진행)

---

## 📊 현재 프로젝트 상태

### ✅ 완료된 기능

#### 1. 백엔드 (inswing-api)
- ✅ JWT 인증 시스템
- ✅ Google/Kakao OAuth 로그인
- ✅ MySQL 데이터베이스 연동
- ✅ AWS S3 + CloudFront 영상 저장
- ✅ AI 분석 서버 연동 (localhost:5000)
- ✅ 규칙 기반 AI 코멘트 생성
- ✅ 스윙 업로드/조회/히스토리 API
- ✅ 느낌(Feeling) 저장 기능
- ✅ 루틴 세션 관리 (시작/종료)

#### 2. AI 분석 서버 (inswing-ai)
- ✅ MediaPipe 기반 15개 메트릭 추출
- ✅ Flask API 서버 (포트 5000)
- ✅ PM2 프로세스 관리
- ✅ 비디오 분석 파이프라인

#### 3. 프론트엔드 (inswing)
- ✅ 다국어 랜딩페이지 (한국어/영어)
- ✅ OAuth 로그인
- ✅ 스윙 업로드 페이지
- ✅ 분석 결과 페이지
- ✅ 히스토리 페이지
- ✅ 루틴 페이지 (베타)
- ✅ 반응형 디자인

#### 4. 인프라
- ✅ EC2 서버 배포
- ✅ Nginx + SSL 설정
- ✅ 도메인 연결 (inswing.ai, api.inswing.ai)
- ✅ PM2 프로세스 관리

---

## 🎯 개발 목표 및 방향성

### 핵심 가치
> "완벽한 분석 데이터 < 공감하고 동기부여하는 코칭"
> 
> "비교는 타인과가 아니라 어제의 나와 해야 한다"
> 
> "INSwing은 평가가 아니라 성장 기록 서비스이다"

### 비전
- 단순 스윙 분석 앱 → **나의 골프 성장 일지 + AI 코치**
- 매일/매 라운드마다 "오늘의 루틴" 제공
- 시간이 지나면 약점/강점 패턴이 자동으로 보이는 구조

---

## 📅 단계별 개발 로드맵

### Phase 1: 안정화 및 개선 (1-2주)
**목표**: 현재 기능의 안정성 향상 및 UX 개선

#### 1.1 버그 수정 및 안정화
- [ ] AI 분석 서버 타임아웃 처리 개선
- [ ] 에러 핸들링 강화 (모든 API 엔드포인트)
- [ ] 로깅 시스템 구축 (Winston 또는 Pino)
- [ ] 모니터링 대시보드 (PM2 + 간단한 메트릭)
- [ ] 데이터베이스 백업 자동화

#### 1.2 UX 개선
- [ ] 업로드 진행률 표시 (Progress Bar)
- [ ] 분석 중 로딩 애니메이션 개선
- [ ] 에러 메시지 사용자 친화적으로 개선
- [ ] 모바일 반응형 최적화 점검
- [ ] 페이지 전환 애니메이션 추가

#### 1.3 성능 최적화
- [ ] AI 분석 서버 응답 시간 측정 및 최적화
- [ ] S3 업로드 속도 개선
- [ ] 데이터베이스 쿼리 최적화
- [ ] 프론트엔드 이미지/비디오 최적화

---

### Phase 2: AI 코칭 시스템 Level 1 (2주)
**목표**: 규칙 기반 → Claude AI 기반 자연스러운 코칭

#### 2.1 Claude API 연동
- [ ] Anthropic 계정 생성 및 API 키 설정
- [ ] `@anthropic-ai/sdk` 패키지 설치
- [ ] 기본 API 호출 테스트
- [ ] 에러 핸들링 및 재시도 로직
- [ ] 로깅 시스템 구축

#### 2.2 프롬프트 엔지니어링
- [ ] 프롬프트 v1 작성 (기본 버전)
- [ ] Few-shot 예시 포함 프롬프트 v2
- [ ] 캐주얼 톤 프롬프트 v3
- [ ] A/B 테스트로 최적 버전 선택
- [ ] 엣지 케이스 처리 (느낌과 데이터 불일치 등)

#### 2.3 백엔드 통합
- [ ] `services/aiCoachingService.js` 생성
- [ ] `routes/swings.js`에 AI 코칭 통합
- [ ] Fallback 로직 (규칙 기반 코멘트)
- [ ] 환경 변수 토글 (`USE_AI_COACHING=true/false`)
- [ ] 성능 모니터링 (응답 시간, 성공률)

#### 2.4 프론트엔드 표시
- [ ] `result.html`에 AI 코칭 카드 추가
- [ ] 타이핑 애니메이션 효과
- [ ] "다시 생성" 버튼 기능
- [ ] `history.html`에 코칭 미리보기 추가
- [ ] 로딩 상태 개선

#### 2.5 테스트 및 개선
- [ ] 베타 테스터 모집 (10명)
- [ ] 피드백 수집 및 분석
- [ ] 프롬프트 최종 버전 확정
- [ ] 프로덕션 배포

**성공 지표**:
- AI 코칭 생성 성공률: 90% 이상
- 평균 응답 시간: 3초 이내
- 사용자 만족도: 4.0/5.0 이상

---

### Phase 3: 루틴 시스템 고도화 (2-3주)
**목표**: 개인화된 성장 루틴 제공

#### 3.1 루틴 엔진 개선
- [ ] 태그 규칙표 정리 (metrics → focus_tags)
- [ ] 최근 N일 데이터 분석 로직 개선
- [ ] 약점/강점 패턴 추출 알고리즘
- [ ] 베스트 스윙 추천 로직
- [ ] 트렌드 분석 (점수 변화, 메트릭 변화)

#### 3.2 루틴 데이터베이스 확장
- [ ] `daily_routines` 테이블 설계 및 생성
- [ ] 루틴 체크인 기능 (컨디션, 목표 입력)
- [ ] 루틴 피드백 기능 (하루 마무리 요약)
- [ ] 루틴 통계 API (`GET /routine/summary`)

#### 3.3 루틴 UI 개선
- [ ] `routine.html` 레이아웃 개선
- [ ] 오늘의 루틴 카드 디자인
- [ ] 최근 7일 그래프 시각화 (Chart.js 또는 D3.js)
- [ ] 나의 패턴 요약 섹션
- [ ] 대표 스윙 썸네일 표시

#### 3.4 AI 기반 루틴 추천
- [ ] 과거 스윙 데이터 기반 개인화
- [ ] AI가 오늘의 목표 문장 생성
- [ ] 약점 개선 포인트 자동 추출
- [ ] 강점 유지 조언

**성공 지표**:
- 루틴 페이지 방문율: 40% 이상
- 루틴 완료율: 60% 이상
- 사용자 재방문율: 50% 이상

---

### Phase 4: 고급 기능 추가 (3-4주)
**목표**: 차별화된 기능으로 경쟁력 강화

#### 4.1 히스토리 비교 기능
- [ ] 스윙 간 비교 기능 (2개 스윙 선택)
- [ ] 메트릭 변화 그래프
- [ ] "이전보다 개선된 점" AI 코멘트
- [ ] 타임라인 뷰 (월별/주별)

#### 4.2 통계 및 인사이트
- [ ] 월별/주별 통계 대시보드
- [ ] 클럽별 평균 점수
- [ ] 촬영 방향별 분석
- [ ] 성장 곡선 시각화
- [ ] 약점/강점 트렌드 분석

#### 4.3 공유 기능
- [ ] 스윙 결과 공유 (링크 생성)
- [ ] 프로필 페이지 (공개/비공개)
- [ ] 레슨 프로 공유 기능 (View Only)
- [ ] SNS 공유 (카카오톡, 인스타그램)

#### 4.4 알림 및 리마인더
- [ ] 루틴 시작 알림 (선택)
- [ ] 주간 리포트 이메일
- [ ] 목표 달성 축하 메시지
- [ ] 장기 미방문 유저 재참여 유도

---

### Phase 5: 프리미엄 기능 (4-6주)
**목표**: 유료화 모델 구축

#### 5.1 프리미엄 기능 정의
- [ ] 무료 vs 프리미엄 기능 비교표
- [ ] 가격 정책 수립
- [ ] 결제 시스템 연동 (아임포트 또는 Stripe)
- [ ] 구독 관리 시스템

#### 5.2 프리미엄 전용 기능
- [ ] 상세 통계 및 그래프
- [ ] 무제한 스윙 업로드
- [ ] 고급 AI 코칭 (히스토리 반영)
- [ ] 레슨 프로 연결 기능
- [ ] 데이터 내보내기 (CSV, PDF 리포트)

#### 5.3 결제 및 구독 관리
- [ ] 결제 페이지
- [ ] 구독 상태 확인
- [ ] 결제 실패 처리
- [ ] 환불 정책 및 처리

---

## 🔧 기술 개선 사항

### 백엔드
- [ ] TypeScript 도입 검토
- [ ] 테스트 코드 작성 (Jest)
- [ ] API 문서화 (Swagger/OpenAPI)
- [ ] 환경 변수 관리 개선 (.env.example)
- [ ] 데이터베이스 마이그레이션 시스템

### 프론트엔드
- [ ] 빌드 시스템 도입 (Vite 또는 Webpack)
- [ ] 코드 분할 및 최적화
- [ ] PWA 지원 (오프라인 기능)
- [ ] 에러 바운더리 추가

### AI 서버
- [ ] 비동기 처리 개선 (큐 시스템)
- [ ] 분석 결과 캐싱
- [ ] 배치 처리 지원
- [ ] GPU 가속 검토 (향후)

### 인프라
- [ ] CI/CD 파이프라인 구축
- [ ] 자동 배포 시스템
- [ ] 모니터링 및 알림 (CloudWatch)
- [ ] 로그 집계 시스템

---

## 📈 성공 지표 (KPI)

### 사용자 지표
- 월간 활성 사용자 (MAU)
- 일간 활성 사용자 (DAU)
- 사용자 재방문율
- 평균 세션 시간
- 스윙 업로드 수 (월간)

### 제품 지표
- AI 코칭 만족도 (5점 척도)
- 루틴 완료율
- 기능 사용률
- 에러율
- 평균 응답 시간

### 비즈니스 지표
- 프리미엄 전환율
- 월간 수익 (MRR)
- 고객 생애 가치 (LTV)
- 이탈률 (Churn Rate)

---

## 🚨 리스크 관리

### 기술적 리스크
1. **AI 분석 서버 장애**
   - 확률: 중
   - 영향: 고
   - 대응: Fallback 로직, 모니터링 강화

2. **API 비용 초과**
   - 확률: 중
   - 영향: 중
   - 대응: 일일 모니터링, 알림 설정, 캐싱 도입

3. **데이터베이스 성능 저하**
   - 확률: 저
   - 영향: 고
   - 대응: 인덱스 최적화, 쿼리 튜닝, 읽기 전용 복제본

### 제품 리스크
1. **사용자 이탈**
   - 확률: 중
   - 영향: 고
   - 대응: 온보딩 개선, 알림 시스템, 피드백 수집

2. **경쟁 서비스 출현**
   - 확률: 중
   - 영향: 중
   - 대응: 차별화 포인트 강화, 빠른 기능 개발

---

## 💰 예상 비용

### 개발 단계
- Anthropic API 크레딧: $20-50
- 테스트 서버 비용: $0 (기존 EC2 활용)
- 도메인/SSL: $0 (기존)

### 운영 비용 (월간)
- EC2 인스턴스: $20-30
- S3 + CloudFront: $10-50 (사용량에 따라)
- Anthropic API: $30-300 (사용자 수에 따라)
- 데이터베이스: $0 (기존 서버)
- **총 예상: $60-380/월**

---

## 📝 다음 액션 아이템

### 즉시 시작 가능 (이번 주)
1. [ ] AI 코칭 시스템 Level 1 시작
   - Anthropic 계정 생성
   - Claude API 연동
   - 기본 프롬프트 작성

2. [ ] 버그 수정 및 안정화
   - 에러 핸들링 강화
   - 로깅 시스템 구축

3. [ ] UX 개선
   - 업로드 진행률 표시
   - 로딩 애니메이션 개선

### 단기 (1-2주)
1. [ ] 루틴 시스템 개선
2. [ ] 통계 대시보드 추가
3. [ ] 모바일 최적화

### 중기 (1-2개월)
1. [ ] 프리미엄 기능 개발
2. [ ] 결제 시스템 연동
3. [ ] 마케팅 페이지 개선

---

## 🎯 우선순위 매트릭스

| 기능 | 중요도 | 긴급도 | 우선순위 |
|------|--------|--------|----------|
| AI 코칭 Level 1 | 높음 | 높음 | 🔥 1순위 |
| 버그 수정 | 높음 | 높음 | 🔥 1순위 |
| UX 개선 | 중간 | 높음 | ⚡ 2순위 |
| 루틴 고도화 | 높음 | 중간 | ⚡ 2순위 |
| 통계 대시보드 | 중간 | 중간 | 📋 3순위 |
| 프리미엄 기능 | 높음 | 낮음 | 📋 3순위 |

---

## 📞 진행 방식

### 주간 회의
- 매주 월요일: 주간 목표 설정
- 매주 금요일: 진행 상황 리뷰

### 작업 관리
- GitHub Issues로 작업 추적
- PR 기반 코드 리뷰
- 배포 전 테스트 필수

### 문서화
- 모든 API 엔드포인트 문서화
- 주요 기능 사용 가이드
- 개발자 온보딩 문서

---

**작성일**: 2025년 1월
**최종 수정**: 2025년 1월

